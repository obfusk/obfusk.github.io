<!DOCTYPE html>
<html>
  <head>
    <title>sudo and umask 077</title>
    <meta content='text/html;charset=utf-8' http-equiv='Content-Type'>
    <link href='/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
    <link href='/css/pygments.css' rel='stylesheet' type='text/css'>
    <link href='/css/vlo.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class='navbar navbar-default navbar-fixed-top'>
      <div class='container w800'>
        <div class='navbar-header'>
          <a class='navbar-brand' href='/'>/var/log/obfusk</a>
        </div>
        <ul class='nav navbar-nav navbar-right'>
          <li>
            <a href='/projects.html'>Projects</a>
          </li>
          <li>
            <a href='/gists.html'>Gists</a>
          </li>
          <li>
            <a href='/archive.html'>Archive</a>
          </li>
          <li>
            <a href='/categories.html'>Categories</a>
          </li>
          <li>
            <a href='/tags.html'>Tags</a>
          </li>
          <li>
            <a href='/pages.html'>Pages</a>
          </li>
        </ul>
      </div>
    </div>
    <div class='container w800'>
      <h1>sudo and umask 077 <small>2014-01-07 22:28:52</small></h1>
      <hr>
      <p>I prefer to set my <code>umask</code> to <code>077</code> so no one can read my files.  For
      the most part, using <code>sudo</code> (which inherits the <code>umask</code>) works just
      fine.  Except when using e.g. <code>vim sudo</code> where it make sense to
      respect the umask, I hadn&#39;t run into trouble.  Until now.</p>
      
      <p>It seems <code>sudo update-alternatives</code> results in
      <code>/var/lib/dpkg/alternatives/*</code> no longer being readable by anyone but
      root, which is not quite what I intended.  So I had to figure out how
      to make <code>sudo</code> play nice with <code>umask</code> without setting a default
      <code>umask</code> in the <code>sudoers</code> file.</p>
      
      <p>The solution I came up with: <code>umask 022</code> in <code>~root/.profile</code> and using
      <code>sudo -i</code> when I don&#39;t want my user&#39;s <code>umask</code> to be used.</p>
      
      <p>- Felix</p>
      <br>
      <hr>
      <footer>
        <p>Â© 2014 Felix C. Stegerman</p>
      </footer>
    </div>
  </body>
</html>
